---
title: Webhook Events
description: Detailed webhook event reference
---

## payment.detected

Sent when a new payment is first seen on the blockchain.

```json
{
  "event": "payment.detected",
  "timestamp": "2024-01-20T14:30:00Z",
  "data": {
    "payment_id": "pay_a1b2c3d4e5f6",
    "chain": "eth",
    "tx_hash": "0x8a5f3e2b1c4d...",
    "address": "0x742d35Cc6634C0532925a3b844Bc9e7595f8bDe7",
    "external_id": "user_123456",
    "amount": "0.5",
    "amount_wei": "500000000000000000",
    "token": null,
    "status": "pending",
    "confirmations": 0,
    "required_confirmations": 12,
    "from_address": "0x9876543210abcdef...",
    "detected_at": "2024-01-20T14:30:00Z"
  }
}
```

:::caution
Do not credit user balance on `payment.detected`. Wait for `payment.confirmed`.
:::

---

## payment.confirming

Sent periodically as confirmations increase (optional subscription).

```json
{
  "event": "payment.confirming",
  "timestamp": "2024-01-20T14:35:00Z",
  "data": {
    "payment_id": "pay_a1b2c3d4e5f6",
    "chain": "eth",
    "tx_hash": "0x8a5f3e2b1c4d...",
    "address": "0x742d35Cc6634C0532925a3b844Bc9e7595f8bDe7",
    "external_id": "user_123456",
    "amount": "0.5",
    "status": "confirming",
    "confirmations": 6,
    "required_confirmations": 12
  }
}
```

Use this to update UI progress (e.g., "6/12 confirmations").

---

## payment.confirmed

Sent when payment reaches required confirmations. **This is the event to credit user balance.**

```json
{
  "event": "payment.confirmed",
  "timestamp": "2024-01-20T14:45:00Z",
  "data": {
    "payment_id": "pay_a1b2c3d4e5f6",
    "chain": "eth",
    "tx_hash": "0x8a5f3e2b1c4d...",
    "address": "0x742d35Cc6634C0532925a3b844Bc9e7595f8bDe7",
    "external_id": "user_123456",
    "amount": "0.5",
    "amount_wei": "500000000000000000",
    "amount_usd": "1150.00",
    "token": null,
    "status": "confirmed",
    "confirmations": 12,
    "required_confirmations": 12,
    "from_address": "0x9876543210abcdef...",
    "detected_at": "2024-01-20T14:30:00Z",
    "confirmed_at": "2024-01-20T14:45:00Z",
    "metadata": {
      "telegram_id": "987654321"
    }
  }
}
```

---

## payment.failed

Sent if a transaction is dropped or reversed (rare).

```json
{
  "event": "payment.failed",
  "timestamp": "2024-01-20T14:40:00Z",
  "data": {
    "payment_id": "pay_a1b2c3d4e5f6",
    "chain": "eth",
    "tx_hash": "0x8a5f3e2b1c4d...",
    "address": "0x742d35Cc6634C0532925a3b844Bc9e7595f8bDe7",
    "external_id": "user_123456",
    "amount": "0.5",
    "status": "failed",
    "reason": "chain_reorg",
    "detected_at": "2024-01-20T14:30:00Z",
    "failed_at": "2024-01-20T14:40:00Z"
  }
}
```

:::note
This event is rare. It typically only occurs during blockchain reorganizations.
:::
